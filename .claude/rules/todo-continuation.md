# TODO Continuation Enforcer

Oh My OpenCode의 `todo-continuation-enforcer` 기능을 구현한 규칙입니다.

## 핵심 원칙

> **미완성 작업은 반드시 계속되어야 한다**

세션이나 턴이 끝날 때 TODO 항목이 남아있으면 자동으로 계속 진행합니다.

---

## 트리거 조건

다음 상황에서 활성화됩니다:

1. **응답 종료 시 미완성 TODO 존재**
2. **"TODO", "FIXME", "WIP" 키워드 감지**
3. **체크리스트에 미완료 항목 존재** (`- [ ]`)
4. **Task 목록에 pending 상태 존재**

---

## 동작 방식

### 자동 감지
```
응답 완료 전 체크:
1. 현재 작업에 미완료 TODO가 있는가?
2. Task 목록에 pending 항목이 있는가?
3. 코드에 TODO/FIXME 주석이 있는가?
```

### 자동 계속
```
미완료 감지 시:
→ "아직 완료되지 않은 작업이 있습니다. 계속 진행합니다."
→ 다음 TODO 항목 자동 시작
```

---

## 적용 규칙

### MUST DO
- 모든 응답 전에 TODO 상태 확인
- 미완료 항목 있으면 계속 진행
- Task 목록 동기화 유지

### MUST NOT DO
- 미완료 상태에서 작업 종료 금지
- TODO 무시하고 새 작업 시작 금지
- 사용자 요청 없이 TODO 삭제 금지

---

## 출력 형식

### 미완료 감지 시
```markdown
---
⚠️ **미완료 작업 감지**

남은 TODO:
- [ ] 항목 1
- [ ] 항목 2

계속 진행합니다...
---
```

### 모든 작업 완료 시
```markdown
---
✅ **모든 작업 완료**

완료된 항목:
- [x] 항목 1
- [x] 항목 2
- [x] 항목 3
---
```

---

## 예외 조건

다음 경우 강제 계속하지 않음:

1. **사용자가 명시적으로 중단 요청**
   - "여기서 멈춰"
   - "나중에 계속하자"
   - "일단 중단"

2. **블로킹 이슈 발생**
   - 사용자 입력 필요
   - 외부 의존성 대기
   - 권한 문제

3. **컨텍스트 한계 임박**
   - 토큰 제한 90% 이상 사용
   - 세션 요약 저장 후 중단

---

## Task 목록 연동

```
TaskList 확인 시:
- pending 상태 = 미완료
- in_progress 상태 = 진행 중
- completed 상태 = 완료

pending 또는 in_progress가 있으면:
→ TODO Continuation 활성화
→ 다음 작업 자동 시작
```

---

## 통합 체크리스트

응답 완료 전 항상 확인:

```
[ ] Task 목록에 pending 없음?
[ ] 현재 응답에 미완료 TODO 없음?
[ ] 코드에 TODO/FIXME 주석 없음?
[ ] 체크리스트 모두 완료?
```

모두 체크되면 → 작업 완료
하나라도 미체크 → 계속 진행
